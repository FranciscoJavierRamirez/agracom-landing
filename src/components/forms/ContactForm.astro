---
// Agracom Internacional S.A. - Contact Form Component
// Formulario de contacto avanzado con validación y tracking

import type { Locale, Region } from '../../types/global';
import { createTranslator } from '../../utils/i18n';

export interface Props {
  lang: Locale;
  region?: Region;
  productId?: string;
  formType?: 'contact' | 'quote' | 'inquiry';
  class?: string;
}

const {
  lang,
  region,
  productId,
  formType = 'contact',
  class: className = ''
} = Astro.props;

// Load translations
const { forms, common } = await createTranslator(lang);

// Form configuration based on type
const formConfig = {
  contact: {
    title: await forms('contact.title'),
    subtitle: await forms('contact.subtitle'),
    submitText: await forms('contact.submit')
  },
  quote: {
    title: await forms('quote.title'),
    subtitle: await forms('quote.subtitle'),
    submitText: await forms('quote.submit')
  },
  inquiry: {
    title: await forms('inquiry.title'),
    subtitle: await forms('inquiry.subtitle'),
    submitText: await forms('inquiry.submit')
  }
};

const currentConfig = formConfig[formType];

// Regional executives
const regionalExecutives = {
  'us-east': {
    name: 'Cristián Rodríguez',
    email: 'cristian@agracom.cl',
    title: lang === 'es' ? 'Ejecutivo Costa Este EE.UU.' : 'US East Coast Executive'
  },
  'mediterranean': {
    name: 'Pedro Mendive',
    email: 'pedro@agracom.cl',
    title: lang === 'es' ? 'Ejecutivo Mediterráneo' : 'Mediterranean Executive'
  },
  'middle-east': {
    name: 'Cristián Rodríguez',
    email: 'cristian@agracom.cl',
    title: lang === 'es' ? 'Ejecutivo Medio Oriente' : 'Middle East Executive'
  }
};

const currentExecutive = region ? regionalExecutives[region] : null;
---

<section 
  id={lang === 'es' ? 'contacto' : 'contact'}
  class={`section bg-gradient-to-br from-neutral-50 to-white ${className}`}
  aria-label={lang === 'es' ? 'Formulario de contacto' : 'Contact form'}
>
  <div class="container mx-auto px-4">
    <div class="grid lg:grid-cols-2 gap-12 items-start">
      
      <!-- Contact Information -->
      <div class="space-y-8">
        <div class="space-y-4">
          <h2 class="text-h2 font-bold text-neutral-900">
            {currentConfig.title}
          </h2>
          <p class="text-xl text-neutral-700 leading-relaxed">
            {currentConfig.subtitle}
          </p>
        </div>

        <!-- Regional Executive (if region is selected) -->
        {currentExecutive && (
          <div class="bg-white rounded-xl p-6 shadow-md border border-neutral-200">
            <div class="flex items-start space-x-4">
              <div class="w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center flex-shrink-0">
                <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
              </div>
              <div class="space-y-2">
                <h3 class="font-semibold text-neutral-900">
                  {lang === 'es' ? 'Su Ejecutivo Regional' : 'Your Regional Executive'}
                </h3>
                <div class="space-y-1">
                  <p class="font-medium text-primary">{currentExecutive.name}</p>
                  <p class="text-sm text-neutral-600">{currentExecutive.title}</p>
                  <div class="flex items-center space-x-2 text-sm text-neutral-700">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                    <a href={`mailto:${currentExecutive.email}`} class="hover:text-primary transition-colors">
                      {currentExecutive.email}
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        )}

        <!-- Contact Methods -->
        <div class="space-y-6">
          <h3 class="text-lg font-semibold text-neutral-900">
            {lang === 'es' ? 'Métodos de Contacto' : 'Contact Methods'}
          </h3>
          
          <div class="grid gap-4">
            <!-- Email -->
            <div class="flex items-center space-x-4 p-4 bg-white rounded-lg border border-neutral-200">
              <div class="w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center">
                <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
              </div>
              <div>
                <p class="font-medium text-neutral-900">Email</p>
                <a href="mailto:info@agracom.cl" class="text-primary hover:underline">
                  info@agracom.cl
                </a>
              </div>
            </div>

            <!-- Phone -->
            <div class="flex items-center space-x-4 p-4 bg-white rounded-lg border border-neutral-200">
              <div class="w-10 h-10 bg-secondary/10 rounded-lg flex items-center justify-center">
                <svg class="w-5 h-5 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                </svg>
              </div>
              <div>
                <p class="font-medium text-neutral-900">
                  {lang === 'es' ? 'Teléfono' : 'Phone'}
                </p>
                <a href="tel:+56212345678" class="text-secondary hover:underline">
                  +56 2 1234 5678
                </a>
              </div>
            </div>

            <!-- Address -->
            <div class="flex items-center space-x-4 p-4 bg-white rounded-lg border border-neutral-200">
              <div class="w-10 h-10 bg-accent/10 rounded-lg flex items-center justify-center">
                <svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
              </div>
              <div>
                <p class="font-medium text-neutral-900">
                  {lang === 'es' ? 'Ubicación' : 'Location'}
                </p>
                <p class="text-neutral-600">Santiago, Chile</p>
              </div>
            </div>

            <!-- Business Hours -->
            <div class="flex items-center space-x-4 p-4 bg-white rounded-lg border border-neutral-200">
              <div class="w-10 h-10 bg-info/10 rounded-lg flex items-center justify-center">
                <svg class="w-5 h-5 text-info" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </div>
              <div>
                <p class="font-medium text-neutral-900">
                  {lang === 'es' ? 'Horario' : 'Hours'}
                </p>
                <p class="text-neutral-600">
                  {lang === 'es' ? 'Lun-Vie 9:00-18:00 CLT' : 'Mon-Fri 9:00-18:00 CLT'}
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Quick Stats -->
        <div class="bg-gradient-to-r from-primary/5 to-secondary/5 rounded-xl p-6">
          <h4 class="font-semibold text-neutral-900 mb-4">
            {lang === 'es' ? 'Respuesta Garantizada' : 'Guaranteed Response'}
          </h4>
          <div class="grid grid-cols-2 gap-4">
            <div class="text-center">
              <div class="text-2xl font-bold text-primary">< 24h</div>
              <div class="text-sm text-neutral-600">
                {lang === 'es' ? 'Respuesta inicial' : 'Initial response'}
              </div>
            </div>
            <div class="text-center">
              <div class="text-2xl font-bold text-secondary">< 48h</div>
              <div class="text-sm text-neutral-600">
                {lang === 'es' ? 'Cotización formal' : 'Formal quote'}
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Contact Form -->
      <div class="bg-white rounded-2xl shadow-xl p-8 border border-neutral-100">
        <form 
          id="contact-form"
          class="space-y-6"
          data-form-type={formType}
          data-region={region}
          data-product={productId}
        >
          <!-- Form Title (for mobile) -->
          <div class="lg:hidden mb-6">
            <h3 class="text-xl font-bold text-neutral-900 mb-2">
              {currentConfig.title}
            </h3>
          </div>

          <!-- Personal Information -->
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <label for="firstName" class="form-label">
                {lang === 'es' ? 'Nombre *' : 'First Name *'}
              </label>
              <input
                type="text"
                id="firstName"
                name="firstName"
                required
                class="form-input"
                placeholder={lang === 'es' ? 'Tu nombre' : 'Your first name'}
                data-validate="required"
              />
              <div class="form-error hidden" data-error="firstName"></div>
            </div>
            
            <div>
              <label for="lastName" class="form-label">
                {lang === 'es' ? 'Apellido *' : 'Last Name *'}
              </label>
              <input
                type="text"
                id="lastName"
                name="lastName"
                required
                class="form-input"
                placeholder={lang === 'es' ? 'Tu apellido' : 'Your last name'}
                data-validate="required"
              />
              <div class="form-error hidden" data-error="lastName"></div>
            </div>
          </div>

          <!-- Contact Information -->
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <label for="email" class="form-label">
                {lang === 'es' ? 'Email Corporativo *' : 'Corporate Email *'}
              </label>
              <input
                type="email"
                id="email"
                name="email"
                required
                class="form-input"
                placeholder={lang === 'es' ? 'tu@empresa.com' : 'you@company.com'}
                data-validate="email"
              />
              <div class="form-error hidden" data-error="email"></div>
            </div>
            
            <div>
              <label for="phone" class="form-label">
                {lang === 'es' ? 'Teléfono' : 'Phone'}
              </label>
              <input
                type="tel"
                id="phone"
                name="phone"
                class="form-input"
                placeholder={lang === 'es' ? '+56 9 1234 5678' : '+1 555 123 4567'}
                data-validate="phone"
              />
              <div class="form-error hidden" data-error="phone"></div>
            </div>
          </div>

          <!-- Company Information -->
          <div>
            <label for="company" class="form-label">
              {lang === 'es' ? 'Empresa *' : 'Company *'}
            </label>
            <input
              type="text"
              id="company"
              name="company"
              required
              class="form-input"
              placeholder={lang === 'es' ? 'Nombre de tu empresa' : 'Your company name'}
              data-validate="required"
            />
            <div class="form-error hidden" data-error="company"></div>
          </div>

          <!-- Product Interest -->
          <div>
            <label for="productInterest" class="form-label">
              {lang === 'es' ? 'Producto de Interés' : 'Product Interest'}
            </label>
            <select
              id="productInterest"
              name="productInterest"
              class="form-select"
              data-validate="select"
            >
              <option value="">
                {lang === 'es' ? 'Selecciona un producto' : 'Select a product'}
              </option>
              <option value="lupins" selected={productId === 'lupins-premium-chilean'}>
                {lang === 'es' ? 'Lupinos Premium (11-17mm)' : 'Premium Lupins (11-17mm)'}
              </option>
              <option value="cherries" selected={productId === 'cherries-santina-dried'}>
                {lang === 'es' ? 'Cerezas Santina Deshidratadas' : 'Santina Dried Cherries'}
              </option>
              <option value="both">
                {lang === 'es' ? 'Ambos productos' : 'Both products'}
              </option>
              <option value="other">
                {lang === 'es' ? 'Otros productos' : 'Other products'}
              </option>
            </select>
            <div class="form-error hidden" data-error="productInterest"></div>
          </div>

          <!-- Volume and Timeline -->
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <label for="volume" class="form-label">
                {lang === 'es' ? 'Volumen Estimado (MT)' : 'Estimated Volume (MT)'}
              </label>
              <select
                id="volume"
                name="volume"
                class="form-select"
              >
                <option value="">
                  {lang === 'es' ? 'Selecciona volumen' : 'Select volume'}
                </option>
                <option value="1-10">1-10 MT</option>
                <option value="10-50">10-50 MT</option>
                <option value="50-100">50-100 MT</option>
                <option value="100+">100+ MT</option>
              </select>
            </div>
            
            <div>
              <label for="timeline" class="form-label">
                {lang === 'es' ? 'Timeline de Entrega' : 'Delivery Timeline'}
              </label>
              <select
                id="timeline"
                name="timeline"
                class="form-select"
              >
                <option value="">
                  {lang === 'es' ? 'Selecciona timeline' : 'Select timeline'}
                </option>
                <option value="immediate">
                  {lang === 'es' ? 'Inmediato (1-2 semanas)' : 'Immediate (1-2 weeks)'}
                </option>
                <option value="short">
                  {lang === 'es' ? 'Corto plazo (1-2 meses)' : 'Short term (1-2 months)'}
                </option>
                <option value="medium">
                  {lang === 'es' ? 'Mediano plazo (3-6 meses)' : 'Medium term (3-6 months)'}
                </option>
                <option value="long">
                  {lang === 'es' ? 'Largo plazo (6+ meses)' : 'Long term (6+ months)'}
                </option>
              </select>
            </div>
          </div>

          <!-- Message -->
          <div>
            <label for="message" class="form-label">
              {lang === 'es' ? 'Mensaje *' : 'Message *'}
            </label>
            <textarea
              id="message"
              name="message"
              rows="4"
              required
              class="form-textarea"
              placeholder={lang === 'es' 
                ? 'Cuéntanos sobre tus requerimientos específicos, certificaciones necesarias, destino, etc.'
                : 'Tell us about your specific requirements, certifications needed, destination, etc.'
              }
              data-validate="required"
            ></textarea>
            <div class="form-error hidden" data-error="message"></div>
          </div>

          <!-- Privacy Consent -->
          <div class="flex items-start space-x-3">
            <input
              type="checkbox"
              id="privacy"
              name="privacy"
              required
              class="mt-1 h-4 w-4 text-primary focus:ring-primary border-neutral-300 rounded"
              data-validate="checkbox"
            />
            <label for="privacy" class="text-sm text-neutral-700 leading-relaxed">
              {lang === 'es' 
                ? 'Acepto la política de privacidad y el procesamiento de mis datos personales para fines comerciales. Entiendo que puedo retirar mi consentimiento en cualquier momento.'
                : 'I accept the privacy policy and the processing of my personal data for commercial purposes. I understand that I can withdraw my consent at any time.'
              }
              <span class="text-error">*</span>
            </label>
            <div class="form-error hidden" data-error="privacy"></div>
          </div>

          <!-- Submit Button -->
          <div class="pt-4">
            <button
              type="submit"
              class="btn btn-primary w-full py-4 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-300 group"
              id="submit-btn"
            >
              <span class="flex items-center justify-center">
                {currentConfig.submitText}
                <svg class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
              </span>
            </button>
          </div>

          <!-- Form Status Messages -->
          <div id="form-status" class="hidden">
            <div id="success-message" class="alert alert-success hidden">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
              </svg>
              {lang === 'es' 
                ? '¡Mensaje enviado! Te contactaremos dentro de 24 horas.'
                : 'Message sent! We will contact you within 24 hours.'
              }
            </div>
            <div id="error-message" class="alert alert-error hidden">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              {lang === 'es' 
                ? 'Error al enviar el mensaje. Por favor intenta nuevamente.'
                : 'Error sending message. Please try again.'
              }
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<!-- Form Validation and Submission JavaScript -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contact-form');
    const submitBtn = document.getElementById('submit-btn');
    const formStatus = document.getElementById('form-status');
    const successMessage = document.getElementById('success-message');
    const errorMessage = document.getElementById('error-message');

    if (!form) return;

    // Validation patterns
    const validators = {
      required: (value) => value.trim() !== '',
      email: (value) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value),
      phone: (value) => value === '' || /^[\+]?[1-9][\d]{0,15}$/.test(value.replace(/\s/g, '')),
      select: (value) => value !== '',
      checkbox: (checked) => checked
    };

    // Error messages
    const errorMessages = {
      required: '{lang === "es" ? "Este campo es requerido" : "This field is required"}',
      email: '{lang === "es" ? "Ingresa un email válido" : "Please enter a valid email"}',
      phone: '{lang === "es" ? "Ingresa un teléfono válido" : "Please enter a valid phone number"}',
      select: '{lang === "es" ? "Por favor selecciona una opción" : "Please select an option"}',
      checkbox: '{lang === "es" ? "Debes aceptar la política de privacidad" : "You must accept the privacy policy"}'
    };

    // Validate field
    function validateField(field) {
      const validateType = field.dataset.validate;
      if (!validateType) return true;

      const value = field.type === 'checkbox' ? field.checked : field.value;
      const isValid = validators[validateType](value);
      
      const errorDiv = document.querySelector(`[data-error="${field.name}"]`);
      
      if (!isValid) {
        field.classList.add('form-input--error');
        if (errorDiv) {
          errorDiv.textContent = errorMessages[validateType];
          errorDiv.classList.remove('hidden');
        }
        return false;
      } else {
        field.classList.remove('form-input--error');
        if (errorDiv) {
          errorDiv.classList.add('hidden');
        }
        return true;
      }
    }

    // Validate entire form
    function validateForm() {
      const fields = form.querySelectorAll('[data-validate]');
      let isValid = true;

      fields.forEach(field => {
        if (!validateField(field)) {
          isValid = false;
        }
      });

      return isValid;
    }

    // Real-time validation
    form.addEventListener('input', function(e) {
      if (e.target.dataset.validate) {
        setTimeout(() => validateField(e.target), 300);
      }
    });

    form.addEventListener('change', function(e) {
      if (e.target.dataset.validate) {
        validateField(e.target);
      }
    });

    // Form submission
    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      if (!validateForm()) {
        return;
      }

      // Show loading state
      submitBtn.disabled = true;
      submitBtn.innerHTML = `
        <span class="flex items-center justify-center">
          <svg class="animate-spin -ml-1 mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          ${'{lang === "es" ? "Enviando..." : "Sending..."}'}
        </span>
      `;

      try {
        // Collect form data
        const formData = new FormData(form);
        const data = Object.fromEntries(formData.entries());
        
        // Add metadata
        data.formType = form.dataset.formType;
        data.region = form.dataset.region;
        data.product = form.dataset.product;
        data.timestamp = new Date().toISOString();
        data.language = '{lang}';

        // Track form submission
        if (typeof gtag !== 'undefined') {
          gtag('event', 'form_submit', {
            event_category: 'Contact',
            event_label: data.formType,
            custom_parameter_region: data.region,
            custom_parameter_product: data.product
          });
        }

        // Simulate API call (replace with actual endpoint)
        await new Promise(resolve => setTimeout(resolve, 1500));
        
        // For now, log the data (replace with actual API call)
        console.log('Form submission data:', data);
        
        // Show success message
        formStatus.classList.remove('hidden');
        successMessage.classList.remove('hidden');
        errorMessage.classList.add('hidden');
        
        // Reset form
        form.reset();
        
        // Track successful submission
        if (typeof gtag !== 'undefined') {
          gtag('event', 'form_submit_success', {
            event_category: 'Contact',
            event_label: data.formType
          });
        }

      } catch (error) {
        console.error('Form submission error:', error);
        
        // Show error message
        formStatus.classList.remove('hidden');
        errorMessage.classList.remove('hidden');
        successMessage.classList.add('hidden');
        
        // Track form error
        if (typeof gtag !== 'undefined') {
          gtag('event', 'form_submit_error', {
            event_category: 'Contact',
            event_label: 'submission_failed'
          });
        }
      } finally {
        // Restore button
        submitBtn.disabled = false;
        submitBtn.innerHTML = `
          <span class="flex items-center justify-center">
            ${'{currentConfig.submitText}'}
            <svg class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </span>
        `;
      }
    });
  });
</script>

<style>
  /* Form Input Styles */
  .form-label {
    @apply block text-sm font-semibold text-neutral-700 mb-2;
  }

  .form-input {
    @apply w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary focus:ring-opacity-20 focus:border-primary transition-colors bg-white text-neutral-900 placeholder-neutral-500;
  }

  .form-select {
    @apply w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary focus:ring-opacity-20 focus:border-primary transition-colors bg-white text-neutral-900;
  }

  .form-textarea {
    @apply w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary focus:ring-opacity-20 focus:border-primary transition-colors bg-white text-neutral-900 placeholder-neutral-500 resize-y;
  }

  .form-input--error {
    @apply border-error focus:ring-error focus:ring-opacity-20 focus:border-error;
  }

  .form-error {
    @apply mt-1 text-sm text-error;
  }

  /* Alert Styles */
  .alert {
    @apply flex items-center p-4 rounded-lg border;
  }

  .alert-success {
    @apply bg-success bg-opacity-10 text-success border-success border-opacity-20;
  }

  .alert-error {
    @apply bg-error bg-opacity-10 text-error border-error border-opacity-20;
  }

  /* Enhanced focus styles for accessibility */
  .form-input:focus,
  .form-select:focus,
  .form-textarea:focus {
    outline: 2px solid transparent;
    outline-offset: 2px;
  }

  /* Loading animation improvements */
  .animate-spin {
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .form-input,
    .form-select,
    .form-textarea {
      @apply text-base; /* Prevent zoom on iOS */
    }
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .form-input,
    .form-select,
    .form-textarea {
      @apply border-2 border-neutral-600;
    }

    .form-input--error {
      @apply border-2 border-red-600;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .form-input,
    .form-select,
    .form-textarea,
    .btn {
      transition: none;
    }
  }
</style>