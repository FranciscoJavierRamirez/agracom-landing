---
// Scripts component for Agracom Internacional
// Mantiene utilidades ligeras de cliente sin duplicar la l√≥gica de i18n
---

<!-- Language preferences sync (no DOM rewrites) -->
<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    try {
      const urlParams = new URLSearchParams(window.location.search);
      const urlLang = urlParams.get('lang');
      if (urlLang === 'es' || urlLang === 'en') {
        // Persist user preference; renderizado del idioma lo hace Astro + JSON
        localStorage.setItem('preferred-language', urlLang);
      }
    } catch (_) {
      // noop
    }
  });
  
  // Expose helper to switch via URL (for potential future hooks)
  window.switchLanguage = function(newLang) {
    if (newLang !== 'es' && newLang !== 'en') return;
    const url = new URL(window.location.href);
    url.searchParams.set('lang', newLang);
    window.location.href = url.toString();
  };
</script>
