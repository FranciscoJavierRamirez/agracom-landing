---
// Agracom Internacional S.A. - Footer Component
// Footer principal con navegaci√≥n, contactos y informaci√≥n corporativa

import type { Locale, Region } from '../../types/global';
import { createTranslator, getLocalizedURL } from '../../utils/i18n';
import LanguageSwitcher from '../ui/LanguageSwitcher.astro';

export interface Props {
  lang: Locale;
  currentRegion?: Region;
  showNewsletter?: boolean;
  showSocial?: boolean;
  class?: string;
}

const {
  lang,
  currentRegion,
  showNewsletter = false,
  showSocial = true,
  class: className = ''
} = Astro.props;

// Load translations
const { common } = await createTranslator(lang);

// Navigation sections
const navigationSections = [
  {
    title: await common('navigation.products'),
    links: [
      { 
        text: lang === 'es' ? 'Lupinos Premium' : 'Premium Lupins',
        href: '#productos' 
      },
      { 
        text: lang === 'es' ? 'Cerezas Santina' : 'Santina Cherries',
        href: '#productos' 
      },
      { 
        text: await common('navigation.certifications'),
        href: '#certificaciones' 
      }
    ]
  },
  {
    title: await common('footer.quick_links'),
    links: [
      { 
        text: await common('navigation.about'),
        href: '#hero'
      },
      { 
        text: await common('navigation.regions'),
        href: '#regiones' 
      },
      { 
        text: await common('navigation.contact'),
        href: '#contacto' 
      }
    ]
  }
];

// Regional contacts
const regionalContacts = [
  {
    region: 'us-east',
    name: 'Cristi√°n Rodr√≠guez Vera',
    title: lang === 'es' ? 'Ejecutivo Costa Este EE.UU.' : 'US East Coast Executive',
    email: 'cristianrodriguezv@agrachile.com',
    phone: '+56 9 1234 5678'
  },
  {
    region: 'mediterranean',
    name: 'Pedro Mendive G.',
    title: lang === 'es' ? 'Ejecutivo Mediterr√°neo' : 'Mediterranean Executive',
    email: 'pedromendive@agrachile.com',
    phone: '+56 9 8765 4321'
  },
  {
    region: 'middle-east',
    name: 'Cristi√°n Rodr√≠guez Vera',
    title: lang === 'es' ? 'Ejecutivo Medio Oriente' : 'Middle East Executive',
    email: 'cristianrodriguezv@agrachile.com',
    phone: '+56 9 1234 5678'
  }
];

// Main office information
const mainOffice = {
  address: lang === 'es' 
    ? 'Avda. Presidente Kennedy 7440, of 313 Vitacura' 
    : 'Avda. Presidente Kennedy 7440, Office 313 Vitacura',
  mainContacts: [
    {
      name: 'Cristi√°n Rodr√≠guez Vera',
      email: 'cristianrodriguezv@agrachile.com'
    },
    {
      name: 'Pedro Mendive G.',
      email: 'pedromendive@agrachile.com'
    }
  ],
  phone: '+56 2 1234 5678',
  city: 'Santiago, Chile',
  coordinates: '-33.4085,-70.5755' // Vitacura coordinates for Google Maps
};

// Social media links (when available)
const socialLinks = [
  {
    name: 'LinkedIn',
    href: 'https://www.linkedin.com/company/agracom-internacional',
    icon: 'linkedin'
  },
  {
    name: 'Email',
    href: 'mailto:info@agracom.cl',
    icon: 'email'
  }
];

// Current year for copyright
const currentYear = new Date().getFullYear();
---

<footer 
  class={`bg-neutral-900 text-white relative overflow-hidden ${className}`}
  role="contentinfo"
>
  <!-- Background Pattern -->
  <div class="absolute inset-0 opacity-5">
    <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KPGcgZmlsbD0iI0ZGQTAwMCIgZmlsbC1vcGFjaXR5PSIwLjEiPgo8Y2lyY2xlIGN4PSIyMCIgY3k9IjIwIiByPSIxIi8+CjwvZz4KPC9nPgo8L3N2Zz4=')] repeat"></div>
  </div>

  <div class="container mx-auto px-4 relative z-10">
    
    <!-- Main Footer Content -->
    <div class="py-16">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
        
        <!-- Brand Section -->
        <div class="lg:col-span-1 space-y-8">
          <!-- Logo and Brand -->
          <div class="space-y-6">
            <a 
              href={getLocalizedURL('/', lang)}
              class="inline-flex items-center space-x-4 group focus:outline-none focus:ring-2 focus:ring-accent rounded-lg p-1"
              aria-label={`${lang === 'es' ? 'Ir al inicio' : 'Go to homepage'}`}
            >
              <!-- AgraCom Official Logo -->
              <div class="w-16 h-16 sm:w-18 sm:h-18 flex items-center justify-center group-hover:scale-105 transition-transform">
                <img 
                  src="/images/agracom-logo.svg" 
                  alt="AgraCom Internacional Logo" 
                  class="w-full h-full object-contain filter brightness-0 invert"
                  loading="lazy"
                />
              </div>
              <div>
                <h2 class="text-2xl font-bold text-white group-hover:text-accent transition-colors">
                  Agracom Internacional
                </h2>
              </div>
            </a>
            
            <!-- Tagline -->
            <p class="text-neutral-300 leading-relaxed text-lg">
              {await common('footer.tagline')}
            </p>
            
            <!-- Quality badges -->
            <div class="space-y-3">
              <h4 class="text-sm font-semibold text-neutral-200 uppercase tracking-wide">
                {lang === 'es' ? 'Certificaciones' : 'Certifications'}
              </h4>
              <div class="flex flex-wrap gap-3">
                <span class="certification-badge certification-badge--kosher text-xs px-4 py-2 bg-gradient-to-r from-neutral-800 to-neutral-700 rounded-full border border-neutral-600 hover:border-accent transition-colors">
                  Kosher
                </span>
                <span class="certification-badge certification-badge--halal text-xs px-4 py-2 bg-gradient-to-r from-neutral-800 to-neutral-700 rounded-full border border-neutral-600 hover:border-accent transition-colors">
                  Halal
                </span>
                <span class="certification-badge certification-badge--fda text-xs px-4 py-2 bg-gradient-to-r from-neutral-800 to-neutral-700 rounded-full border border-neutral-600 hover:border-accent transition-colors">
                  FDA
                </span>
              </div>
            </div>
          </div>

          <!-- Social Links -->
          {showSocial && (
            <div class="space-y-4">
              <h3 class="text-sm font-semibold text-neutral-200 uppercase tracking-wide">
                {await common('footer.follow_us')}
              </h3>
              <div class="flex space-x-4">
                {socialLinks.map((social) => (
                  <a
                    href={social.href}
                    class="w-12 h-12 bg-gradient-to-r from-neutral-800 to-neutral-700 hover:from-primary hover:to-accent rounded-xl flex items-center justify-center transition-all duration-300 group border border-neutral-600 hover:border-accent hover:scale-110"
                    aria-label={`${social.name} - ${lang === 'es' ? 'Abrir en nueva ventana' : 'Open in new window'}`}
                    target={social.href.startsWith('http') ? '_blank' : undefined}
                    rel={social.href.startsWith('http') ? 'noopener noreferrer' : undefined}
                  >
                    {social.icon === 'linkedin' && (
                      <svg class="w-6 h-6 text-neutral-300 group-hover:text-white transition-colors" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                      </svg>
                    )}
                    {social.icon === 'email' && (
                      <svg class="w-6 h-6 text-neutral-300 group-hover:text-white transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                      </svg>
                    )}
                  </a>
                ))}
              </div>
            </div>
          )}
        </div>

        <!-- Navigation Section - Combined -->
        <div class="space-y-8">
          <div class="border-l-4 border-accent pl-6">
            <h3 class="text-xl font-bold text-white mb-6">
              {lang === 'es' ? 'Navegaci√≥n' : 'Navigation'}
            </h3>
            
            <!-- Products Subsection -->
            <div class="space-y-6 mb-8">
              <h4 class="text-lg font-semibold text-accent mb-4">
                {await common('navigation.products')}
              </h4>
              <ul class="space-y-3">
                {navigationSections[0]?.links?.map((link) => (
                  <li>
                    <a
                      href={link.href}
                      class="text-neutral-300 hover:text-accent hover:translate-x-2 transition-all duration-200 py-1 group flex items-center space-x-3"
                    >
                      <svg class="w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                      </svg>
                      <span class="font-medium">{link.text}</span>
                    </a>
                  </li>
                ))}
              </ul>
            </div>

            <!-- Quick Links Subsection -->
            <div class="space-y-6">
              <h4 class="text-lg font-semibold text-accent mb-4">
                {await common('footer.quick_links')}
              </h4>
              <ul class="space-y-3">
                {navigationSections[1]?.links?.map((link) => (
                  <li>
                    <a
                      href={link.href}
                      class="text-neutral-300 hover:text-accent hover:translate-x-2 transition-all duration-200 py-1 group flex items-center space-x-3"
                    >
                      <svg class="w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                      </svg>
                      <span class="font-medium">{link.text}</span>
                    </a>
                  </li>
                ))}
              </ul>
            </div>
          </div>
        </div>

        <!-- Contact Information Column -->
        <div class="space-y-8">
          <div class="border-l-4 border-accent pl-6">
            <h3 class="text-xl font-bold text-white mb-6">
              {await common('footer.contact_title')}
            </h3>
          </div>

          <!-- Main Office Info -->
          <div class="bg-gradient-to-br from-neutral-800 to-neutral-700 rounded-2xl p-6 space-y-6 border border-neutral-600 hover:border-accent transition-colors">
            <div class="flex items-center space-x-4 mb-4">
              <div class="w-12 h-12 bg-gradient-to-r from-accent to-primary rounded-xl flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                </svg>
              </div>
              <h4 class="text-lg font-bold text-white">
                {lang === 'es' ? 'Oficina Principal' : 'Main Office'}
              </h4>
            </div>
            
            <div class="space-y-4">
              <div class="flex items-start space-x-4">
                <svg class="w-5 h-5 text-accent mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <div>
                  <p class="font-semibold text-white">{mainOffice.address}</p>
                  <p class="text-neutral-300">{mainOffice.city}</p>
                </div>
              </div>
              
              <div class="flex items-center space-x-4">
                <svg class="w-5 h-5 text-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                </svg>
                <a href={`tel:${mainOffice.phone}`} class="font-semibold text-accent hover:text-white transition-colors">
                  {mainOffice.phone}
                </a>
              </div>
              
              <a 
                href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(mainOffice.address + ', Santiago, Chile')}`}
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center space-x-2 text-accent hover:text-white transition-colors font-medium group"
              >
                <svg class="w-5 h-5 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                </svg>
                <span class="group-hover:underline">{lang === 'es' ? 'Ver en Google Maps' : 'View on Google Maps'}</span>
              </a>
            </div>
          </div>

          <!-- Business Hours -->
          <div class="bg-gradient-to-r from-primary/20 to-accent/20 rounded-xl p-6 border border-accent/30">
            <div class="flex items-center space-x-3 mb-4">
              <svg class="w-6 h-6 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <h5 class="font-bold text-white text-lg">
                {lang === 'es' ? 'Horario de Atenci√≥n' : 'Business Hours'}
              </h5>
            </div>
            <div class="text-neutral-200">
              <p class="font-semibold text-lg">{lang === 'es' ? 'Lunes a Viernes' : 'Monday to Friday'}</p>
              <p class="text-accent font-mono text-xl font-bold">9:00 - 18:00 (CLT)</p>
            </div>
          </div>

          <!-- Team Contacts -->
          <div class="space-y-4">
            <h5 class="text-lg font-bold text-white flex items-center space-x-3">
              <svg class="w-6 h-6 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
              </svg>
              <span>{lang === 'es' ? 'Nuestro Equipo' : 'Our Team'}</span>
            </h5>
            
            <div class="space-y-3">
              {mainOffice.mainContacts.map((contact) => (
                <div class="bg-neutral-800 rounded-xl p-4 border border-neutral-600 hover:border-accent transition-all duration-300 hover:shadow-lg group">
                  <p class="font-bold text-white mb-3">{contact.name}</p>
                  <a 
                    href={`mailto:${contact.email}`}
                    class="text-accent hover:text-white transition-colors flex items-center space-x-3 group-hover:translate-x-1"
                  >
                    <svg class="w-4 h-4 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                    <span class="group-hover:underline font-medium">{contact.email}</span>
                  </a>
                </div>
              ))}
            </div>
          </div>

          <!-- Google Maps -->
          <div class="bg-neutral-800 rounded-2xl overflow-hidden border border-neutral-600 hover:border-accent transition-colors shadow-xl">
            <iframe
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3329.0924!2d-70.5547!3d-33.4080!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9662ceb0c5b2b87f%3A0x1234567890abcdef!2sAv.%20Pdte.%20Kennedy%207440%2C%20Vitacura%2C%20Regi%C3%B3n%20Metropolitana%2C%20Chile!5e0!3m2!1sen!2scl!4v1640995200000!5m2!1sen!2scl"
              width="100%"
              height="300"
              style="border:0;"
              allowfullscreen=""
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              title={lang === 'es' ? 'Ubicaci√≥n de Agracom Internacional' : 'Agracom Internacional Location'}
              class="w-full h-72 hover:scale-105 transition-transform duration-500"
            ></iframe>
          </div>

          <!-- Regional Contact (if applicable) -->
          {currentRegion && (
            <div class="bg-gradient-to-r from-accent to-primary rounded-2xl p-6 text-white border border-accent/30 shadow-xl">
              <div class="flex items-center space-x-3 mb-6">
                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
                <h4 class="text-xl font-bold">
                  {lang === 'es' ? 'Su Ejecutivo Regional' : 'Your Regional Executive'}
                </h4>
              </div>
              {regionalContacts
                .filter(contact => contact.region === currentRegion)
                .map((contact) => (
                  <div class="bg-white/10 rounded-xl p-5 backdrop-blur-sm border border-white/20">
                    <p class="font-bold text-xl mb-2">{contact.name}</p>
                    <p class="text-white/90 mb-4 font-medium">{contact.title}</p>
                    <div class="space-y-3">
                      <a href={`mailto:${contact.email}`} class="flex items-center space-x-3 text-white/90 hover:text-white transition-colors group">
                        <svg class="w-5 h-5 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                        </svg>
                        <span class="font-medium group-hover:underline">{contact.email}</span>
                      </a>
                      <a href={`tel:${contact.phone}`} class="flex items-center space-x-3 text-white/90 hover:text-white transition-colors group">
                        <svg class="w-5 h-5 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                        </svg>
                        <span class="font-medium group-hover:underline">{contact.phone}</span>
                      </a>
                    </div>
                  </div>
                ))
              }
            </div>
          )}
        </div>
      </div>
    </div>

    <!-- Newsletter Section (Optional) -->
    {showNewsletter && (
      <div class="border-t border-neutral-700 py-12">
        <div class="max-w-3xl mx-auto text-center space-y-6">
          <h3 class="text-2xl font-bold text-white">
            {lang === 'es' ? 'Mantente Informado' : 'Stay Informed'}
          </h3>
          <p class="text-neutral-300 text-lg">
            {lang === 'es' 
              ? 'Recibe actualizaciones sobre productos y mercados agr√≠colas'
              : 'Get updates on products and agricultural markets'
            }
          </p>
          <form class="flex flex-col sm:flex-row gap-4 max-w-lg mx-auto">
            <input
              type="email"
              placeholder={lang === 'es' ? 'Tu email' : 'Your email'}
              class="flex-1 px-6 py-4 bg-neutral-800 text-white rounded-xl border border-neutral-600 focus:border-accent focus:ring-2 focus:ring-accent/20 focus:outline-none transition-colors"
              required
            />
            <button
              type="submit"
              class="btn btn-primary px-8 py-4 font-bold rounded-xl hover:scale-105 transition-transform"
            >
              {lang === 'es' ? 'Suscribirse' : 'Subscribe'}
            </button>
          </form>
        </div>
      </div>
    )}

    <!-- Bottom Bar -->
    <div class="border-t border-neutral-700 py-8">
      <div class="flex flex-col md:flex-row justify-between items-center space-y-6 md:space-y-0">
        
        <!-- Copyright -->
        <div class="text-neutral-400 text-center md:text-left">
          <p class="font-medium">
            ¬© {currentYear} Agracom Internacional S.A. 
            {lang === 'es' ? 'Todos los derechos reservados.' : 'All rights reserved.'}
          </p>
        </div>

        <!-- Language Switcher -->
        <div class="flex items-center">
          <LanguageSwitcher variant="footer" currentLang={lang} />
        </div>

        <!-- Legal Links -->
        <div class="flex items-center space-x-6 text-neutral-400">
          <a href="#" class="hover:text-accent transition-colors font-medium">
            {lang === 'es' ? 'Pol√≠tica de Privacidad' : 'Privacy Policy'}
          </a>
          <span class="text-neutral-600">‚Ä¢</span>
          <a href="#" class="hover:text-accent transition-colors font-medium">
            {lang === 'es' ? 'T√©rminos de Uso' : 'Terms of Use'}
          </a>
        </div>
      </div>
    </div>

    <!-- "Made in Chile" Badge -->
    <div class="text-center pb-8">
      <div class="inline-flex items-center space-x-3 text-neutral-500 bg-neutral-800 px-6 py-3 rounded-full border border-neutral-600">
        <span class="text-2xl" title={lang === 'es' ? 'Hecho en Chile' : 'Made in Chile'}>üá®üá±</span>
        <span class="font-semibold">{await common('footer.made_in_chile')}</span>
      </div>
    </div>
  </div>

  <!-- Scroll to Top Button -->
  <button
    type="button"
    class="fixed bottom-8 right-8 w-14 h-14 bg-gradient-to-r from-primary to-accent hover:from-accent hover:to-primary text-white rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300 opacity-0 invisible z-50 hover:scale-110"
    id="scroll-to-top"
    aria-label={lang === 'es' ? 'Volver arriba' : 'Scroll to top'}
  >
    <svg class="w-7 h-7 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
    </svg>
  </button>
</footer>

<!-- Footer JavaScript -->
<script define:vars={{ currentLang: lang }}>
  // Scroll to top functionality
  document.addEventListener('DOMContentLoaded', function() {
    const scrollButton = document.getElementById('scroll-to-top');
    
    if (scrollButton) {
      // Show/hide scroll button based on scroll position
      window.addEventListener('scroll', function() {
        if (window.pageYOffset > 400) {
          scrollButton.style.opacity = '1';
          scrollButton.style.visibility = 'visible';
        } else {
          scrollButton.style.opacity = '0';
          scrollButton.style.visibility = 'invisible';
        }
      });
      
      // Scroll to top when clicked
      scrollButton.addEventListener('click', function() {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
    }
  });

  // Newsletter form handling (if enabled)
  const newsletterForm = document.querySelector('footer form');
  if (newsletterForm) {
    newsletterForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const emailInput = this.querySelector('input[type="email"]');
      const email = emailInput ? emailInput.value : '';
      
      // Add your newsletter subscription logic here
      console.log('Newsletter subscription:', email);
      
      // Show success message
      const button = this.querySelector('button');
      if (button) {
        const originalText = button.textContent;
        button.textContent = currentLang === 'es' ? '¬°Gracias!' : 'Thanks!';
        button.disabled = true;
        
        setTimeout(() => {
          button.textContent = originalText;
          button.disabled = false;
          this.reset();
        }, 2000);
      }
    });
  }
</script>

<style>
  /* Smooth scroll behavior */
  html {
    scroll-behavior: smooth;
  }

  /* Enhanced hover effects for links */
  footer a {
    position: relative;
  }

  footer a:not(.btn):not([class*="bg-"]):hover::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, var(--color-accent), var(--color-primary));
    animation: slideIn 0.3s ease-out;
    border-radius: 1px;
  }

  @keyframes slideIn {
    from {
      width: 0;
    }
    to {
      width: 100%;
    }
  }

  /* Scroll to top button animation */
  #scroll-to-top {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  #scroll-to-top:hover {
    transform: translateY(-3px) scale(1.1);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  }

  /* Focus styles for accessibility */
  footer button:focus,
  footer a:focus {
    outline: 3px solid var(--color-accent);
    outline-offset: 2px;
    border-radius: 4px;
  }

  /* Newsletter form enhancements */
  footer form input:focus {
    box-shadow: 0 0 0 4px rgba(21, 101, 192, 0.15);
  }

  /* Enhanced certification badges */
  .certification-badge {
    transition: all 0.3s ease;
  }

  .certification-badge:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
  }

  /* Responsive grid adjustments */
  @media (max-width: 1024px) {
    .grid.lg\\:grid-cols-3 {
      grid-template-columns: 1fr;
      gap: 3rem;
    }
    
    /* Adjust contact section grid on medium screens */
    .grid.lg\\:grid-cols-2 {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
  }

  @media (max-width: 640px) {
    .grid.lg\\:grid-cols-3 {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
    
    /* Adjust spacing on mobile */
    footer .space-x-4 {
      gap: 1rem;
    }
    
    /* Responsive iframe height */
    footer iframe {
      height: 250px !important;
    }
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    footer {
      border-top: 4px solid #fff;
    }
    
    .certification-badge {
      border: 2px solid currentColor;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
    
    #scroll-to-top:hover {
      transform: none;
    }
    
    .certification-badge:hover {
      transform: none;
    }
    
    @keyframes slideIn {
      from, to {
        width: 100%;
      }
    }
  }

  /* Enhanced gradient effects */
  .bg-gradient-to-r,
  .bg-gradient-to-br {
    position: relative;
    overflow: hidden;
  }

  .bg-gradient-to-r::before,
  .bg-gradient-to-br::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.8s ease;
  }

  .bg-gradient-to-r:hover::before,
  .bg-gradient-to-br:hover::before {
    left: 100%;
  }
</style>